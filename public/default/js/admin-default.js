window.columnFilters={},window.columnFilters.range=function(e,a){var t=$(e),n=t.find("input"),o=n.filter(":first"),i=n.filter(":last"),l=t.closest("td").data("index");o.data("ajax-data-name","from"),i.data("ajax-data-name","to"),$.fn.dataTable.ext.search.push(function(e,t,n){if(a.settings()[0].sTableId!=e.sTableId)return!0;var c=a.data()[n][l];void 0!==c["@data-order"]&&(c=c["@data-order"]);var r=o.val(),s=i.val();return o.closest(".input-date").length>0&&i.closest(".input-date").length>0?(r=""!=r?o.closest(".input-date").data("DateTimePicker").date():Number.NEGATIVE_INFINITY,s=""!=s?i.closest(".input-date").data("DateTimePicker").date():Number.POSITIVE_INFINITY,c=moment(c)):(c=parseInt(c),r=""!=r?parseInt(r):Number.NEGATIVE_INFINITY,s=""!=s?parseInt(s):Number.POSITIVE_INFINITY),c>=r&&s>=c}),n.on("keyup change",function(){a.draw()})},window.columnFilters.select=function(e,a){var t=$(e),n=t.closest("td").data("index");t.on("change",function(){a.column(n).search(t.val()).draw()})},window.columnFilters.text=function(e,a){var t=$(e),n=t.closest("td").data("index");t.on("keyup change",function(){a.column(n).search(t.val()).draw()})},$(function(){$(".adminCheckboxAll").change(function(){var e=$(this).is(":checked");$(".adminCheckboxRow").prop("checked",e).filter(":first").change()}),$(document).delegate(".adminCheckboxRow","change",function(){var e=[];$(".adminCheckboxRow:checked").each(function(){e.push($(this).val())}),$(".tableActions .btnAction").each(function(){var a=$(this),t=a.data("href")+e.join(",");a.attr("href",t)})})}),$(function(){$(document).delegate(".btn-delete","click",function(e){e.preventDefault();var a=$(this).closest("form");bootbox.confirm(window.admin.lang.table["delete-confirm"],function(e){e&&a.submit()})}),bootbox.setDefaults("locale",window.admin.locale)}),$(function(){$(document).delegate('*[data-toggle="lightbox"]',"click",function(e){e.preventDefault(),$(this).ekkoLightbox({always_show_close:!1})})}),$(function(){$(".input-date").each(function(){var e=$(this);e.datetimepicker({locale:window.admin.locale}).trigger("dp.change").on("dp.change",function(){e.change()})})}),$(function(){$(".input-select").select2()}),$(function(){$(".imageUpload").each(function(e,a){var t=$(a),n=t.closest(".form-group"),o=t.find(".errors"),i=t.find(".no-value"),l=t.find(".has-value"),c=t.find(".thumbnail img.has-value"),r=t.find(".imageValue"),s=new Flow({target:t.data("target"),testChunks:!1,chunkSize:1073741824,query:{_token:t.data("token")}});s.assignBrowse(t.find(".imageBrowse"),!1,!0),s.on("filesSubmitted",function(e){s.upload()}),s.on("fileSuccess",function(e,a){s.removeFile(e),o.html(""),n.removeClass("has-error");var t=$.parseJSON(a);c.attr("src",t.url),l.find("span").text(t.value),r.val(t.value),i.addClass("hidden"),l.removeClass("hidden")}),s.on("fileError",function(e,a){s.removeFile(e);var t=$.parseJSON(a),i="";$.each(t,function(e,a){i+='<p class="help-block">'+a+"</p>"}),o.html(i),n.addClass("has-error")}),t.find(".imageRemove").click(function(){r.val(""),i.removeClass("hidden"),l.addClass("hidden")})})}),$(function(){$(".imageUploadMultiple").each(function(e,a){var t=$(a),n=t.closest(".form-group"),o=t.find(".form-group"),i=t.find(".errors"),l=t.find(".imageValue"),c=new Flow({target:t.data("target"),testChunks:!1,chunkSize:1073741824,query:{_token:t.data("token")}}),r=function(){var e=[];t.find("img[data-value]").each(function(){e.push($(this).data("value"))}),l.val(e.join(","))};c.assignBrowse(t.find(".imageBrowse")),c.on("filesSubmitted",function(e){c.upload()}),c.on("fileSuccess",function(e,a){c.removeFile(e),i.html(""),n.removeClass("has-error");var t=$.parseJSON(a);o.append('<div class="col-xs-6 col-md-3 imageThumbnail"><div class="thumbnail"><img data-value="'+t.value+'" src="'+t.url+'" /><a href="#" class="imageRemove">Remove</a></div></div>'),r()}),c.on("fileError",function(e,a){c.removeFile(e);var t=$.parseJSON(a),o="";$.each(t,function(e,a){o+='<p class="help-block">'+a+"</p>"}),i.html(o),n.addClass("has-error")}),t.on("click",".imageRemove",function(e){e.preventDefault(),$(this).closest(".imageThumbnail").remove(),r()}),o.sortable({onUpdate:function(){r()}})})}),$(function(){!function(){var e=window.location.href;e=e.replace(window.location.search,""),e=e.replace(/\/create$/,""),e=e.replace(/\/([0-9]+)\/edit/,"");var a=$('#side-menu a[href="'+window.location.href+'"]');a.length||(a=$('#side-menu a[href="'+e+'"]')),a.addClass("active").parents("li").addClass("active").end().parents("ul").addClass("collapse").addClass("in")}(),function(){$("html").tooltip({selector:"[data-toggle=tooltip]",container:"body"})}(),function(){$('input[type="text"]:first').focus()}(),$(".alert-message").each(function(){var e=$(this);setTimeout(function(){e.fadeOut(600,function(){e.remove()})},500)})});