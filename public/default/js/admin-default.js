$(function(){$(".adminCheckboxRow").on("change",function(e){var n=$(this),t=n.closest("tr");n.is(":checked")?t.addClass("info"):t.removeClass("info")}),$(".adminCheckboxAll").on("change",function(){var e=$(this),n=$(".adminCheckboxRow");e.is(":checked")?n.not(":checked").each(function(e,n){this.checked=!0,$(this).trigger("change")}):n.filter(":checked").each(function(e,n){this.checked=!1,$(this).trigger("change")})})}),$(function(){$("button.btn-delete").on("click",function(e){e.preventDefault();var n=$(this).closest("form");bootbox.confirm(window.Admin.Settings.lang.table["delete-confirm"],function(e){e&&n.submit()})}),$("button.btn-destroy").on("click",function(e){e.preventDefault();var n=$(this).closest("form");bootbox.confirm(window.Admin.Settings.lang.table["destroy-confirm"],function(e){e&&n.submit()})})}),$(function(){$(document).delegate('*[data-toggle="lightbox"]',"click",function(e){e.preventDefault(),$(this).ekkoLightbox({always_show_close:!1})})}),$(function(){$(".input-date").each(function(){var e=$(this);e.datetimepicker({locale:window.Admin.Settings.locale}).trigger("dp.change").on("dp.change",function(){e.change()})})}),$(function(){$(".input-select").each(function(){var e={},n=$(this);n.hasClass("input-taggable")&&(e.tags=!0),n.select2(e)})}),$(function(){$(".imageUpload").each(function(e,n){var t=$(n),i=t.closest(".form-group"),a=t.find(".errors"),o=t.find(".no-value"),c=t.find(".has-value"),r=t.find(".thumbnail img.has-value"),s=t.find(".imageValue"),d=new Flow({target:t.data("target"),testChunks:!1,chunkSize:1073741824,query:{_token:t.data("token")}});d.assignBrowse(t.find(".imageBrowse"),!1,!0),d.on("filesSubmitted",function(e){d.upload()}),d.on("fileSuccess",function(e,n){d.removeFile(e),a.html(""),i.removeClass("has-error");var t=$.parseJSON(n);r.attr("src",t.url),c.find("span").text(t.value),s.val(t.value),o.addClass("hidden"),c.removeClass("hidden")}),d.on("fileError",function(e,n){d.removeFile(e);var t=$.parseJSON(n),o="";$.each(t,function(e,n){o+='<p class="help-block">'+n+"</p>"}),a.html(o),i.addClass("has-error")}),t.find(".imageRemove").click(function(){s.val(""),o.removeClass("hidden"),c.addClass("hidden")})})}),$(function(){$(".imageUploadMultiple").each(function(e,n){var t=$(n),i=t.closest(".form-group"),a=t.find(".form-group"),o=t.find(".errors"),c=t.find(".imageValue"),r=new Flow({target:t.data("target"),testChunks:!1,chunkSize:1073741824,query:{_token:t.data("token")}}),s=function(){var e=[];t.find("img[data-value]").each(function(){e.push($(this).data("value"))}),c.val(e.join(","))};r.assignBrowse(t.find(".imageBrowse")),r.on("filesSubmitted",function(e){r.upload()}),r.on("fileSuccess",function(e,n){r.removeFile(e),o.html(""),i.removeClass("has-error");var t=$.parseJSON(n),c=$($("#thumbnail_template").html());c.find("img").attr("src",t.url).attr("data-value",t.value),a.append(c),s()}),r.on("fileError",function(e,n){r.removeFile(e);var t=$.parseJSON(n),a="";$.each(t,function(e,n){a+='<p class="help-block">'+n+"</p>"}),o.html(a),i.addClass("has-error")}),t.on("click",".imageRemove",function(e){e.preventDefault(),$(this).closest(".imageThumbnail").remove(),s()}),a.sortable({onUpdate:function(){s()}})})}),window.Admin.Components.add("ckeditor",function(){switchOn_handler=function(e,n){CKEDITOR.disableAutoInline=!0;var n=$.extend({},n);return CKEDITOR.replace(e,n)},switchOff_handler=function(e,n){e.destroy()},exec_handler=function(e,n,t,i){switch(n){case"insert":e.insertText(i);break;case"changeHeight":e.resize("100%",i)}},window.Admin.WYSIWYG.add("ckeditor",switchOn_handler,switchOff_handler,exec_handler)}).add("tinymce",function(){switchOn_handler=function(e,n){var n=$.extend({selector:"#"+e},n);return tinymce.init(n)},switchOff_handler=function(e,n){e.destroy()},exec_handler=function(e,n,t,i){switch(n){case"insert":e.insertContent(i)}},window.Admin.WYSIWYG.add("tinymce",switchOn_handler,switchOff_handler,exec_handler)}).add("simplemde",function(){switchOn_handler=function(e,n){var n=$.extend({element:$("#"+e)[0]},n);return new SimpleMDE(n)},switchOff_handler=function(e,n){e.destroy()},exec_handler=function(e,n,t,i){switch(n){case"insert":e.codemirror.replaceSelection(i)}},window.Admin.WYSIWYG.add("simplemde",switchOn_handler,switchOff_handler,exec_handler)}),$(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$('form[data-type="display-actions"]').on("submit",function(e){var n=$(this),t=$(e.target.action),i=$(".adminCheckboxRow").filter(":checked");i.length||e.preventDefault(),this.action=t.data("action"),this.method=t.data("method"),i.each(function(){n.append('<input type="hidden" name="id[]" value="'+$(this).val()+'" />')})}),$(".inline-editable").editable(),window.Admin.Components.init(),window.Admin.Controllers.call(),bootbox.setDefaults("locale",window.Admin.Settings.locale)});